!function(e,t,n,i){e.fn.contextMenu=function(t,n,i){"use strict";o[t]?n&&(n instanceof Array||"string"==typeof n||n.nodeType||n.jquery||(i=n,n=null)):(i=n,n=t,t="popup"),n instanceof Array&&"update"!=t&&(t="menu");var r=i;return"update"!=t&&(i=a.optionOtimizer(t,i),r=e.extend({},e.fn.contextMenu.defaults,i),r.baseTrigger||(r.baseTrigger=this)),o[t].call(this,n,r),this},e.fn.contextMenu.defaults={triggerOn:"click",displayAround:"cursor",mouseClick:"left",verAdjust:0,horAdjust:0,top:"auto",left:"auto",closeOther:!0,containment:t,winEventClose:!0,sizeStyle:"auto",position:"auto",onOpen:function(e,t){},afterOpen:function(e,t){},onClose:function(e,t){}};var o={menu:function(t,n){var i=e(this);t=a.createMenuList(i,t,n),a.contextMenuBind.call(this,t,n,"menu")},popup:function(t,n){e(t).addClass("iw-contextMenu"),a.contextMenuBind.call(this,t,n,"popup")},update:function(t,n){this.each(function(){var i=e(this),o=i.data("iw-menuData"),r=o.menu;if("object"==typeof t)for(var u=0;u<t.length;u++){var s=t[u].name,c=t[u].disable,l=r.children("li").filter(function(){return e(this).contents().filter(function(){return 3==this.nodeType}).text()==s}),d=t[u].subMenu;"true"==c?l.addClass("iw-mDisable"):l.removeClass("iw-mDisable"),d&&l.contextMenu("update",d)}a.onOff(r),o.option=e.extend({},o.option,n),i.data("iw-menuData",o);var m=o.option.triggerOn;n&&m!=n.triggerOn&&(i.unbind(".contextMenu"),i.bind(m+".contextMenu",a.eventHandler))})},refresh:function(){var t=this.filter(function(){return!!e(this).data("iw-menuData")}).data("iw-menuData"),n=this.filter(function(){return!e(this).data("iw-menuData")});t.option.baseTrigger=this,a.contextMenuBind.call(n,t.menuSelector,t.option)},close:function(){var e=this.data("iw-menuData");e&&a.closeContextMenu(e.option,this,e.menu,null)},value:function(e){var t=this.data("iw-menuData");return t[e]?t[e]:t.option?t.option[e]:null},destroy:function(){this.each(function(){var t=e(this),n=t.data("iw-menuData").menuId,i=e(".iw-contextMenu[menuId="+n+"]"),o=i.data("iw-menuData");1==o.noTrigger?i.hasClass("iw-created")?i.remove():(i.removeClass("iw-contextMenu "+n).removeAttr("menuId").removeData("iw-menuData"),i.find("li.iw-mTrigger").contextMenu("destroy")):(o.noTrigger--,i.data("iw-menuData",o)),t.unbind(".contextMenu").removeClass("iw-mTrigger").removeData("iw-menuData")})}},a={contextMenuBind:function(t,n,i){var o=this,r=e(t),u=r.data("iw-menuData");if(0!=r.length||(r=o.find(t),0!=r.length)){"menu"==i&&a.menuHover(r);var s=n.baseTrigger;if(u)u.noTrigger++,r.data("iw-menuData",u);else{var c;s.data("iw-menuData")?c=s.data("iw-menuData").menuId:(c=Math.ceil(1e5*Math.random()),s.data("iw-menuData",{menuId:c}));var l=r.clone();l.appendTo("body"),u={menuId:c,menuWidth:l.outerWidth(!0),menuHeight:l.outerHeight(!0),noTrigger:1,trigger:o},r.data("iw-menuData",u).attr("menuId",c),l.remove()}o.addClass("iw-mTrigger").data("iw-menuData",{menuId:u.menuId,option:n,menu:r,menuSelector:t,method:i});var d;"hover"==n.triggerOn?(d="mouseenter",-1!=s.index(o)&&s.add(r).bind("mouseleave.contextMenu",function(t){0==e(t.relatedTarget).closest(".iw-contextMenu").length&&e('.iw-contextMenu[menuId="'+u.menuId+'"]').hide(100)})):d=n.triggerOn,o.bind(d+".contextMenu",a.eventHandler),r.bind("click mouseenter",function(e){e.stopPropagation()})}},eventHandler:function(i){i.preventDefault();var o=e(this),r=o.data("iw-menuData"),u=r.menu,s=u.data("iw-menuData"),c=r.option,l=c.containment,d={trigger:o,menu:u},m=l==t,f=-1==c.baseTrigger.index(o);!f&&c.closeOther&&e(".iw-contextMenu").css("display","none"),u.find(".iw-mSelected").removeClass("iw-mSelected"),c.onOpen.call(this,d,i);var p,g,h,w,v=e(l),x=v.innerHeight(),M=v.innerWidth(),b=0,y=0,C=s.menuHeight,k=s.menuWidth,D=0,T=0,O=p=parseInt(c.verAdjust),I=g=parseInt(c.horAdjust);if(m||(b=v.offset().top,y=v.offset().left,"static"==v.css("position")&&v.css("position","relative")),"auto"==c.sizeStyle&&(C=Math.min(C,x),k=Math.min(k,M),k+=20),"cursor"==c.displayAround)D=m?currentMousePos.x:currentMousePos.x+e(t).scrollLeft()-y,T=m?currentMousePos.y:currentMousePos.y+e(t).scrollTop()-b,h=T+C,w=D+k,h>x&&(0>T-C?C-T>h-x?(T=x-C,p=-1*p):(T=0,p=0):(T-=C,p=-1*p)),w>M&&(0>D-k?k-D>w-M?(D=M-k,g=-1*g):(D=0,g=0):(D-=k,g=-1*g));else if("trigger"==c.displayAround){var S=o.outerHeight(!0),E=o.outerWidth(!0),H=m?o.offset().left-v.scrollLeft():o.offset().left-y,A=m?o.offset().top-v.scrollTop():o.offset().top-b,z=E;D=H+E,T=A,h=T+C,w=D+k,h>x&&(0>T-C?C-T>h-x?(T=x-C,p=-1*p):(T=0,p=0):(T=T-C+S,p=-1*p)),w>M&&(0>D-k?k-D>w-M?(D=M-k,g=-1*g,z=-E):(D=0,g=0,z=0):(D=D-k-E,g=-1*g,z=-E)),"top"==c.position?(C=Math.min(s.menuHeight,A),T=A-C,p=O,D-=z):"left"==c.position?(k=Math.min(s.menuWidth,H),D=H-k,g=I):"bottom"==c.position?(C=Math.min(s.menuHeight,x-A-S),T=A+S,p=O,D-=z):"right"==c.position&&(k=Math.min(s.menuWidth,M-H-E),D=H+E,g=I)}var P=u.outerWidth(!0)-u.width(),j=u.outerHeight(!0)-u.height(),W={position:m||f?"fixed":"absolute",display:"inline-block",height:"",width:"","overflow-y":C!=s.menuHeight?"auto":"hidden","overflow-x":k!=s.menuWidth?"auto":"hidden"};if("auto"==c.sizeStyle&&(W.height=C-j+"px",W.width=k-P+"px"),"auto"!=c.left&&(D=a.getPxSize(c.left,M)),"auto"!=c.top&&(T=a.getPxSize(c.top,x)),!m){var B=o.offsetParent().offset();f?(D=D+y-e(t).scrollLeft(),T=T+b-e(t).scrollTop()):(D-=y-B.left,T-=b-B.top)}W.left=D+g+"px",W.top=T+p+"px",u.css(W),c.afterOpen.call(this,d,i),a.tempTextBox(),o.is("input,select,textarea")||"menu"!=r.method||e("#iw-tempTxt").focus(),0==o.closest(".iw-contextMenu").length&&(e(".iw-curMenu").removeClass("iw-curMenu"),u.addClass("iw-curMenu"));var L={trigger:o,menu:u,option:c,method:r.method};e("html").unbind("click",a.clickEvent).click(L,a.clickEvent),e(n.documentElement).unbind("keyup",a.keyEvent).keyup(L,a.keyEvent),c.winEventClose&&e(t).bind("scroll resize",L,a.scrollEvent)},scrollEvent:function(e){a.closeContextMenu(e.data.option,e.data.trigger,e.data.menu,e)},clickEvent:function(t){var n=t.data.trigger.get(0);n!==t.target&&0==e(t.target).closest(".iw-contextMenu").length&&a.closeContextMenu(t.data.option,t.data.trigger,t.data.menu,t)},keyEvent:function(t){var n=t.data.menu,i=t.data.option,o=t.keyCode;if(27==o&&a.closeContextMenu(i,t.data.trigger,n,t),"menu"==t.data.method){var r=e(".iw-curMenu"),u=r.children("li:not(.iw-mDisable)"),s=u.filter(".iw-mSelected"),c=u.index(s),l=function(e){s.removeClass("iw-mSelected"),e.addClass("iw-mSelected")},d=function(){l(u.filter(":first"))},m=function(){l(u.filter(":last"))},f=function(){l(u.filter(":eq("+(c+1)+")"))},p=function(){l(u.filter(":eq("+(c-1)+")"))},g=function(){var e=s.data("iw-menuData");if(e){s.triggerHandler("mouseenter.contextMenu");var t=e.menu;t.addClass("iw-curMenu"),r.removeClass("iw-curMenu"),r=t,u=r.children("li:not(.iw-mDisable)"),s=u.filter(".iw-mSelected"),d()}},h=function(){var e=r.data("iw-menuData").trigger,t=e.closest(".iw-contextMenu");0!=t.length&&(r.removeClass("iw-curMenu").css("display","none"),t.addClass("iw-curMenu"))};switch(o){case 13:s.click();break;case 40:c==u.length-1||0==s.length?d():f();break;case 38:0==c||0==s.length?m():p();break;case 33:d();break;case 34:m();break;case 37:h();break;case 39:g()}}},closeContextMenu:function(i,o,r,u){e(n.documentElement).unbind("keyup",a.keyEvent),e("html").unbind("click",a.clickEvent),e(t).unbind("scroll resize",a.scrollEvent),e(".iw-contextMenu").hide(),e(n).focus(),e("#iw-tempTxt").remove(),i.onClose.call(this,{trigger:o,menu:r},u)},getPxSize:function(e,t){return isNaN(e)?-1!=e.indexOf("%")?parseInt(e)*t/100:parseInt(e):e},menuHover:function(t){t.children("li").bind("mouseenter",function(n){e(".iw-curMenu").removeClass("iw-curMenu"),t.addClass("iw-curMenu");var i=t.find("li.iw-mSelected"),o=i.find(".iw-contextMenu");0!=o.length&&i[0]!=this&&o.hide(100),i.removeClass("iw-mSelected"),e(this).addClass("iw-mSelected")})},createMenuList:function(n,i,o){var r=o.baseTrigger,u=Math.floor(1e4*Math.random());if("object"==typeof i&&!i.nodeType&&!i.jquery){for(var s=e('<ul class="iw-contextMenu iw-created iw-cm-menu" id="iw-contextMenu'+u+'"></ul>'),c=0;c<i.length;c++){var l=i[c].name,d=i[c].fun,m=i[c].subMenu,f=i[c].img||"",p=i[c].title||l,g=i[c].disable,h=e('<li title="'+p+'">'+l+"</li>");f&&h.prepend('<img src="'+f+'" align="absmiddle" class="iw-mIcon" />'),"true"==g&&h.addClass("iw-mDisable"),h.bind("click",d),s.append(h),m&&(h.append('<div class="iw-cm-arrow-right" />'),a.subMenu(h,m,r,o))}if(-1==r.index(n[0]))n.append(s);else{var w=o.containment==t?"body":o.containment;e(w).append(s)}return a.onOff(e("#iw-contextMenu"+u)),"#iw-contextMenu"+u}if(0!=e(i).length){var v=e(i);return v.removeClass("iw-contextMenuCurrent").addClass("iw-contextMenu iw-cm-menu iw-contextMenu"+u).attr("menuId","iw-contextMenu"+u).css("display","none"),v.find("ul").each(function(t,n){var i=e(this),u=i.parent("li");u.append('<div class="iw-cm-arrow-right" />'),i.addClass("iw-contextMenuCurrent"),a.subMenu(u,".iw-contextMenuCurrent",r,o)}),a.onOff(e(".iw-contextMenu"+u)),".iw-contextMenu"+u}},subMenu:function(e,t,n,i){e.contextMenu("menu",t,{triggerOn:"hover",displayAround:"trigger",position:"auto",baseTrigger:n,containment:i.containment})},onOff:function(t){t.find(".iw-mOverlay").remove(),t.find(".iw-mDisable").each(function(){var t=e(this);t.append('<div class="iw-mOverlay"/>'),t.find(".iw-mOverlay").bind("click mouseenter",function(e){e.stopPropagation()})})},tempTextBox:function(){var t=e('<input type="text" id="iw-tempTxt" />');t.css({position:"fixed",bottom:"0px",width:"1px","font-size":"1px",outline:"none",border:"0px",left:"0px",opacity:".1",padding:"0px"}),e("body").append(t)},optionOtimizer:function(t,n){return n?("menu"==t&&(n.mouseClick||(n.mouseClick="right")),"right"==n.mouseClick&&"click"==n.triggerOn&&(n.triggerOn="contextmenu"),-1!=e.inArray(n.triggerOn,["hover","mouseenter","mouseover","mouseleave","mouseout","focusin","focusout"])&&(n.displayAround="trigger"),n):void 0}}}(jQuery,window,document);