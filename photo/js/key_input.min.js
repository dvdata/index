function setGalleryIndex(e){selected_gallery_index=e}function increaseGalleryIndex(){return 6==selected_gallery_index?selected_gallery_index=1:selected_gallery_index++,selected_gallery_index}function decreaseGalleryIndex(){return 1>=selected_gallery_index?selected_gallery_index=6:selected_gallery_index--,selected_gallery_index}function setupKeyListener(){window.addEventListener("keydown",onKeyPress),log("key listener init")}function onKeyPress(e){var t=e.which||e.keyCode;keyPressHandler(t)}function keyPressHandler(e){switch(current_section){case"main_menu":40==e&&callAboutPage();break;case"about_page":38==e&&callCloseAboutPage();break;case"photo_gallery":40==e&&callCategoryView();break;case"photo_open":37==e&&1==large_image_displayed&&browsePrevPhoto(),39==e&&1==large_image_displayed&&browseNextPhoto(),38==e&&closeLargeImage(),40==e&&callCategoryView();break;case"category_menu":37==e&&activateCategoryStrip(decreaseGalleryIndex()),39==e&&activateCategoryStrip(increaseGalleryIndex()),38==e&&category_view_intro_complete&&callCloseCategoryMenu(),13==e&&0!=selected_gallery_index&&selectCategoryStrip(selected_gallery_index),(49==e||97==e)&&selectCategoryStrip(1),(50==e||98==e)&&selectCategoryStrip(2),(51==e||99==e)&&selectCategoryStrip(3),(52==e||100==e)&&selectCategoryStrip(4),(53==e||101==e)&&selectCategoryStrip(5),(54==e||102==e)&&selectCategoryStrip(6)}32==e&&toggleFusionMenu()}function onBackKeyEvent(){if("function"==typeof history.pushState)history.pushState("jibberish",null,null),window.onpopstate=function(){history.pushState("newjibberish",null,null)};else{var e=!0;window.onhashchange=function(){e?e=!1:(e=!0,window.location.hash=Math.random())}}}var selected_gallery_index=0;